# Whatsapp System Design: Chat Messaging Systems.

    The video "WhatsApp System Design: Chat Messaging Systems for Interviews" discusses the key features and design principles of a chat-based messaging system like WhatsApp. The speaker advises starting with simple features and gradually building up to more complex ones. They cover critical features such as group messaging, online user status, and message delivery receipts. The video also discusses optimizing the system for memory footprint and resilience during high-traffic events. The speaker emphasizes the importance of focusing on key areas like routing mechanisms and reducing duplication of information to design an efficient messaging system. Overall, the video is a useful resource for anyone interested in designing chat messaging systems.
-------------------------------------------------------------------------------------
00:00:00 -> In this section of the transcript, the speaker discusses the key features of a chat-based application like Whatsapp, which includes group messaging and read receipts. The speaker advises starting with simple features and asking questions about things they already know. The excerpt covers four critical features that can be taken up in the interview, including group messaging, image sharing, online status of users, and chat duration. The speaker explains the importance of storing user information on the gateway itself to avoid expensive user-to-box mapping. It is suggested to refer to the system design playlist for more detailed information.


00:05:00 -> In this section, the speaker discusses the need to increase the maximum number of connections that can be stored in a single box while avoiding wasting memory by keeping information for who is connected to which box. They suggest decoupling this information from the system and sending it to a sessions microservice. The session service then acts as a router for messages and sends them to the correct box for the intended recipient. The speaker also discusses the use of web sockets for real-time communication and the need for notifications when messages have been delivered. The delivery receipt is achieved through a TCP acknowledgement system that sends a response from user B back to the gateway acknowledging message receipt.


00:10:00 -> In this section of the video, the speaker discusses two more features of a chat messaging system. The first feature is delivering receipts to the sender to acknowledge that their message has been received. The second feature involves tracking when a user was last online to determine their online status for other users. This is done by logging user activities and maintaining a timestamp in a table, with a microservice dedicated to updating the last seen timestamp. The system can differentiate between user activities and app-generated requests to prevent inaccurate timestamps. The third feature is accomplished through this process.


00:15:00 -> In this section, the speaker discusses the chat messaging system of WhatsApp and how it handles group messaging. To reduce the memory footprint caused by numerous user connections, the session service is separated from the gateways, and the details of the message handling mechanism are explained. To reduce the load on the gateways, the message is sent as an unparsed message to the session service, which passes it through a parser microservice to convert it to a sensible message. The group service is used to maintain the information about group members, and the session service requests this information to route the message to the relevant users. The number of users in a group is limited to a reasonable number, such as 200, to maintain real-time messaging.


00:20:00 -> In this section, the speaker discusses various ways to optimize the chat messaging system for memory footprint, such as using consistent hashing and message queues. The system also needs to have item potency and be resilient, especially during high-traffic events like festivals where de-prioritizing unimportant messages can help keep the system running smoothly. The speaker emphasizes the importance of focusing on key areas like routing mechanisms and reducing duplication of information to design an effective and efficient chat messaging system.
